import unittest
from unittest.mock import MagicMock

from clan_members_rank import ClanMembersRanker

TEST_CLAN_MEMBERS_RESPONSE = {"items":[{"tag":"#2QVRQC00C","name":"the ironstein","role":"elder","lastSeen":"20210617T065556.000Z","expLevel":13,"trophies":5577,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":1,"previousClanRank":2,"donations":56,"donationsReceived":80,"clanChestPoints":0},{"tag":"#LYJVYUUUR","name":"ZEPOL 1244","role":"coLeader","lastSeen":"20210617T123313.000Z","expLevel":13,"trophies":5563,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":2,"previousClanRank":1,"donations":632,"donationsReceived":360,"clanChestPoints":0},{"tag":"#90LUPPJY","name":"Reidyy123","role":"elder","lastSeen":"20210617T094125.000Z","expLevel":13,"trophies":5529,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":3,"previousClanRank":3,"donations":178,"donationsReceived":160,"clanChestPoints":0},{"tag":"#8VUG0GQRY","name":"joseph","role":"elder","lastSeen":"20210617T122354.000Z","expLevel":13,"trophies":5501,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":4,"previousClanRank":5,"donations":68,"donationsReceived":160,"clanChestPoints":0},{"tag":"#YV9GU2VG","name":"Goku","role":"member","lastSeen":"20210617T113925.000Z","expLevel":13,"trophies":5495,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":5,"previousClanRank":7,"donations":36,"donationsReceived":160,"clanChestPoints":0},{"tag":"#2LLJURRV8","name":"luki","role":"elder","lastSeen":"20210617T120344.000Z","expLevel":13,"trophies":5488,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":6,"previousClanRank":14,"donations":122,"donationsReceived":320,"clanChestPoints":0},{"tag":"#V82V8V8L","name":"⚡Electrons⚡","role":"elder","lastSeen":"20210616T233110.000Z","expLevel":12,"trophies":5473,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":7,"previousClanRank":4,"donations":60,"donationsReceived":240,"clanChestPoints":0},{"tag":"#PUUG9V8","name":"jt14","role":"coLeader","lastSeen":"20210617T121737.000Z","expLevel":13,"trophies":5433,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":8,"previousClanRank":9,"donations":532,"donationsReceived":320,"clanChestPoints":0},{"tag":"#890RY2G9","name":"Lem","role":"elder","lastSeen":"20210617T105112.000Z","expLevel":13,"trophies":5421,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":9,"previousClanRank":11,"donations":158,"donationsReceived":240,"clanChestPoints":0},{"tag":"#9VPLCVPLJ","name":"gttr","role":"elder","lastSeen":"20210617T094750.000Z","expLevel":12,"trophies":5396,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":10,"previousClanRank":6,"donations":239,"donationsReceived":320,"clanChestPoints":0},{"tag":"#9GQU0LRVP","name":"fsReR","role":"elder","lastSeen":"20210617T122928.000Z","expLevel":12,"trophies":5351,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":11,"previousClanRank":10,"donations":396,"donationsReceived":344,"clanChestPoints":0},{"tag":"#PR9R8VYQ","name":"Corrosion","role":"elder","lastSeen":"20210617T123528.000Z","expLevel":13,"trophies":5342,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":12,"previousClanRank":15,"donations":316,"donationsReceived":280,"clanChestPoints":0},{"tag":"#YQRG8VLYV","name":"Ivoryditty","role":"elder","lastSeen":"20210617T120740.000Z","expLevel":12,"trophies":5340,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":13,"previousClanRank":8,"donations":122,"donationsReceived":200,"clanChestPoints":0},{"tag":"#PU0PC2LUV","name":"けつ","role":"member","lastSeen":"20210617T093822.000Z","expLevel":11,"trophies":5338,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":14,"previousClanRank":20,"donations":110,"donationsReceived":120,"clanChestPoints":0},{"tag":"#288LULRGP","name":"Sami","role":"elder","lastSeen":"20210617T123912.000Z","expLevel":13,"trophies":5319,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":15,"previousClanRank":17,"donations":341,"donationsReceived":10,"clanChestPoints":0},{"tag":"#2YLUGYVGQ","name":"THE SHADOW LORD","role":"elder","lastSeen":"20210617T121313.000Z","expLevel":12,"trophies":5317,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":16,"previousClanRank":13,"donations":479,"donationsReceived":280,"clanChestPoints":0},{"tag":"#LYCR0VCP","name":"superflex223","role":"elder","lastSeen":"20210617T064026.000Z","expLevel":11,"trophies":5307,"arena":{"id":54000013,"name":"Challenger II"},"clanRank":17,"previousClanRank":16,"donations":58,"donationsReceived":200,"clanChestPoints":0},{"tag":"#CYLJGQG8","name":"Rob","role":"member","lastSeen":"20210616T221044.000Z","expLevel":12,"trophies":5269,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":18,"previousClanRank":19,"donations":176,"donationsReceived":240,"clanChestPoints":0},{"tag":"#RRPYJLQ0R","name":"FatIntellectual","role":"elder","lastSeen":"20210617T084321.000Z","expLevel":10,"trophies":5260,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":19,"previousClanRank":12,"donations":308,"donationsReceived":240,"clanChestPoints":0},{"tag":"#YQ80RVL","name":"wongsta","role":"elder","lastSeen":"20210617T112756.000Z","expLevel":13,"trophies":5240,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":20,"previousClanRank":22,"donations":112,"donationsReceived":360,"clanChestPoints":0},{"tag":"#8RQYC2UL","name":"davep","role":"elder","lastSeen":"20210617T120343.000Z","expLevel":12,"trophies":5226,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":21,"previousClanRank":24,"donations":126,"donationsReceived":320,"clanChestPoints":0},{"tag":"#PY8V28G92","name":"ËZ K1ÃpZ","role":"member","lastSeen":"20210617T123134.000Z","expLevel":11,"trophies":5226,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":22,"previousClanRank":21,"donations":98,"donationsReceived":80,"clanChestPoints":0},{"tag":"#89GC0","name":"Pogbah Eats","role":"elder","lastSeen":"20210617T114244.000Z","expLevel":11,"trophies":5214,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":23,"previousClanRank":18,"donations":391,"donationsReceived":340,"clanChestPoints":0},{"tag":"#LUVR228CC","name":"Deino","role":"member","lastSeen":"20210617T053114.000Z","expLevel":11,"trophies":5170,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":24,"previousClanRank":26,"donations":186,"donationsReceived":200,"clanChestPoints":0},{"tag":"#PPC8PYJ","name":"joelly2","role":"member","lastSeen":"20210617T103006.000Z","expLevel":10,"trophies":5141,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":25,"previousClanRank":25,"donations":40,"donationsReceived":120,"clanChestPoints":0},{"tag":"#9JR0JP0G8","name":"CR Harry","role":"elder","lastSeen":"20210617T115444.000Z","expLevel":10,"trophies":5074,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":26,"previousClanRank":29,"donations":188,"donationsReceived":400,"clanChestPoints":0},{"tag":"#Y8G899CU9","name":"anon1ofus","role":"member","lastSeen":"20210616T210044.000Z","expLevel":12,"trophies":5064,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":27,"previousClanRank":28,"donations":38,"donationsReceived":80,"clanChestPoints":0},{"tag":"#2UJ2GJ8RL","name":"Cooky","role":"member","lastSeen":"20210617T001942.000Z","expLevel":11,"trophies":5061,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":28,"previousClanRank":27,"donations":8,"donationsReceived":0,"clanChestPoints":0},{"tag":"#RRGYV2L88","name":"NRG","role":"member","lastSeen":"20210617T110653.000Z","expLevel":10,"trophies":5045,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":29,"previousClanRank":23,"donations":208,"donationsReceived":280,"clanChestPoints":0},{"tag":"#L2RPR8CQR","name":"▫️▫️▫️","role":"elder","lastSeen":"20210617T111127.000Z","expLevel":10,"trophies":5004,"arena":{"id":54000012,"name":"Legendary Arena"},"clanRank":30,"previousClanRank":30,"donations":54,"donationsReceived":160,"clanChestPoints":0},{"tag":"#YYGL9CV9U","name":"HugusTheWise","role":"member","lastSeen":"20210617T095102.000Z","expLevel":10,"trophies":4926,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":31,"previousClanRank":34,"donations":407,"donationsReceived":280,"clanChestPoints":0},{"tag":"#R0L0U8GQP","name":"Tkdkaka","role":"elder","lastSeen":"20210617T091920.000Z","expLevel":11,"trophies":4909,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":32,"previousClanRank":35,"donations":401,"donationsReceived":280,"clanChestPoints":0},{"tag":"#RLQY2YVQY","name":"wiflix","role":"elder","lastSeen":"20210617T081258.000Z","expLevel":10,"trophies":4899,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":33,"previousClanRank":33,"donations":177,"donationsReceived":280,"clanChestPoints":0},{"tag":"#2YR9QLQUU","name":"~Jules~","role":"leader","lastSeen":"20210617T110822.000Z","expLevel":13,"trophies":4883,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":34,"previousClanRank":32,"donations":174,"donationsReceived":0,"clanChestPoints":0},{"tag":"#9CRGP22J0","name":"pb S T E A V E","role":"member","lastSeen":"20210617T111847.000Z","expLevel":10,"trophies":4873,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":35,"previousClanRank":41,"donations":106,"donationsReceived":120,"clanChestPoints":0},{"tag":"#20GLQCYUQ","name":"LauraG14","role":"elder","lastSeen":"20210617T090534.000Z","expLevel":13,"trophies":4867,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":36,"previousClanRank":31,"donations":160,"donationsReceived":160,"clanChestPoints":0},{"tag":"#9PP9GG2QR","name":"Dark","role":"elder","lastSeen":"20210617T123716.000Z","expLevel":10,"trophies":4816,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":37,"previousClanRank":37,"donations":216,"donationsReceived":0,"clanChestPoints":0},{"tag":"#Q0QP02V2Q","name":"Nacho","role":"elder","lastSeen":"20210617T103356.000Z","expLevel":11,"trophies":4799,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":38,"previousClanRank":39,"donations":441,"donationsReceived":360,"clanChestPoints":0},{"tag":"#8P2YRCLG9","name":"Ethan","role":"member","lastSeen":"20210617T105609.000Z","expLevel":10,"trophies":4790,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":39,"previousClanRank":38,"donations":11,"donationsReceived":0,"clanChestPoints":0},{"tag":"#P88RGUVC0","name":"Decessions","role":"elder","lastSeen":"20210617T115819.000Z","expLevel":11,"trophies":4784,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":40,"previousClanRank":36,"donations":472,"donationsReceived":360,"clanChestPoints":0},{"tag":"#G8G0VUGGP","name":"zain","role":"elder","lastSeen":"20210617T100551.000Z","expLevel":10,"trophies":4700,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":41,"previousClanRank":42,"donations":152,"donationsReceived":0,"clanChestPoints":0},{"tag":"#9C9CCCVUR","name":"williams14","role":"member","lastSeen":"20210617T123726.000Z","expLevel":10,"trophies":4681,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":42,"previousClanRank":40,"donations":260,"donationsReceived":200,"clanChestPoints":0},{"tag":"#8ULG80VJU","name":"C9Aero","role":"member","lastSeen":"20210617T120232.000Z","expLevel":10,"trophies":4673,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":43,"previousClanRank":43,"donations":0,"donationsReceived":240,"clanChestPoints":0},{"tag":"#VV9CUJVU","name":"CMLL","role":"member","lastSeen":"20210617T121014.000Z","expLevel":10,"trophies":4628,"arena":{"id":54000056,"name":"Arena 14"},"clanRank":44,"previousClanRank":44,"donations":16,"donationsReceived":200,"clanChestPoints":0},{"tag":"#9VGQ89LJY","name":"krudda","role":"coLeader","lastSeen":"20210617T092404.000Z","expLevel":13,"trophies":4131,"arena":{"id":54000011,"name":"Arena 12"},"clanRank":45,"previousClanRank":45,"donations":688,"donationsReceived":360,"clanChestPoints":0},{"tag":"#GGY22GCV9","name":"Totally a noob","role":"member","lastSeen":"20210614T051550.000Z","expLevel":8,"trophies":3362,"arena":{"id":54000007,"name":"Arena 10"},"clanRank":46,"previousClanRank":47,"donations":0,"donationsReceived":40,"clanChestPoints":0},{"tag":"#UG2P2YJ","name":"Dringsta","role":"member","lastSeen":"20210617T115825.000Z","expLevel":10,"trophies":3290,"arena":{"id":54000007,"name":"Arena 10"},"clanRank":47,"previousClanRank":48,"donations":167,"donationsReceived":80,"clanChestPoints":0}],"paging":{"cursors":{}}}

# TODO: Test properly with mocks etc
class TestStringMethods(unittest.TestCase):

    def test_upper(self):
        self.assertEqual('foo'.upper(), 'FOO')

    def test_isupper(self):
        self.assertTrue('FOO'.isupper())
        self.assertFalse('Foo'.isupper())

    def test_split(self):
        s = 'hello world'
        self.assertEqual(s.split(), ['hello', 'world'])
        # check that s.split fails when the separator is not a string
        with self.assertRaises(TypeError):
            s.split(2)

if __name__ == '__main__':
    unittest.main()